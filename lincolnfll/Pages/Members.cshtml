@page
@model lincolnfll.Pages.MembersModel
@{
    
}

@functions{
    public int process2()
    {
        int length = 0;
        Console.WriteLine(Model.Read().Length);
        if(Model.Read().Length > 0)
        {
            length = Model.Read()[0].Length;
        }
        return length;
    }
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Members</title>
    <style>
        th {
            border: solid 2pt;
        }
    </style>
</head>
<body id="body">
    <table id="table">
        <tr style="background-color:yellow;"><th>First Name</th><th>Last Name</th><th>Member's Email</th><th>Parent's Email</th><th>Grade</th><th>Team</th></tr>
        <br />
        <br />
    </table>
    <script>
var g = "@string.Join(")", Model.Read2())";
console.log(g.length);
if (g.length > 0) {
        for (var i = 0; i < @Model.Read2().Length; i++) {
            var f = "@string.Join(")", Model.Read2())";
            f = f.split(")");
            @{
                Model.incrementIndex();
                }
            if (i % 2 == 0) {
                document.getElementById("table").innerHTML += `<tr id=${i} style="background-color:rgb(122, 122, 122, 0.5);"></tr>`;
            }
            else {
                document.getElementById("table").innerHTML += `<tr id=${i} style="background-color:white;"></tr>`;
            }
            for (var l = 0; l < @process2(); l++) {
                var s = f[i].replace(/&qu/g, '').replace(/ot\;/g, '"');
                document.getElementById(`${i}`).innerHTML += `<th>${JSON.parse(s)[l]}</th>`;
            }
            @{Model.resetSmall();}
        }
}
            document.body.innerHTML += "<br><br><br><button style='background-color:deepskyblue; color:white;' onclick='leave()'>Back to Main</button>"
function leave() {
        //@@{
        //    Response.Redirect("main");
        //}
        window.open("main")
}
    </script>
</body>
</html>
